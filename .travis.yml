language: go
go:
  - '1.10.2'
before_script:
  - sudo apt-get -qq update
  - sudo apt-get install -y sqlite3
  - go get github.com/mattn/go-sqlite3
  - go get github.com/jinzhu/gorm
  - go get github.com/Unknwon/com
script:
  - openssl aes-256-cbc -K $encrypted_6aeb6f62faaa_key -iv $encrypted_6aeb6f62faaa_iv -in deploy-key.enc -out deploy-key -d
  - chmod 600 deploy-key
  - eval `ssh-agent -s`
  - ssh-add deploy-key
  - git config user.name "Tosone"
  - git config user.email "i@tosiney.com"
  - make worktree
  - make all && make release
