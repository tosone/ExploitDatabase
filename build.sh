#!/bin/sh

# db=exploit.db
# csv=files.csv
# target=exploit

# if [ -f $db ]; then
#     rm $db
# fi

# if [ -f $csv ]; then
#     rm $csv
# fi

# if [ -d release ]; then
#     rm -rf release
# fi

# if [ -d dist ]; then
#     rm -rf dist
# fi

# mkdir release

# wget https://raw.githubusercontent.com/offensive-security/exploit-database/master/files_exploits.csv -O files.csv

# sqlite3 exploit.db < exploit.sql

BuildStamp=main.BuildStamp=`date '+%Y-%m-%d_%I:%M:%S%p'`
GitHash=main.GitHash=`git rev-parse HEAD`

# go build -o ./release/${target} -ldflags "-s -w -X $BuildStamp -X $GitHash" main.go
# CC="gcc-7" GOOS=linux GOARCH=amd64 go build -o ./release/${target} -ldflags "-s -w -X $BuildStamp -X $GitHash" main.go
GOOS=windows CGO_ENABLED=1 GOARCH=amd64 CC="x86_64-w64-mingw32-gcc -fno-stack-protector -D_FORTIFY_SOURCE=0 -lssp" go build -o ./release/${target}.exe -ldflags "-s -w -X $BuildStamp -X $GitHash" main.go
